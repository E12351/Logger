<!-- 

                                      TEAM VEGA

 -->
<!doctype html>
<html>
  <head>
    <title>VEGA </title>

    <!-- Websocket IO -->
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <!-- ANUGULAR SPEEDOMETER AND HOME COMPONENTS-->
    <!-- Battry_Chart Imports -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
    <script src="http://code.highcharts.com/stock/highstock.src.js"></script>
    <script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <script src="https://code.highcharts.com/highcharts-more.js"></script>
   <script src="https://code.highcharts.com/modules/solid-gauge.js"></script>



    <!-- Tabs -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<!-- Resources -->

    <!-- Local SPEEDO METER -->



    <!--     <link href="CSS/battryChart.css" rel="stylesheet"> -->

    <!-- local JS files -->
    <script type="text/javascript" src="battryChart.js"></script>
    <script type="text/javascript">
      var myapp = angular.module('myapp', ["highcharts-ng"]);
    </script>

    <style>
      body  {
        /*background-image: url("img/mainBack.jpg");
        background-color: #cccccc;*/
      }

      .navbar{
       min-height:20px; 
       /*or whatever height you require*/
      }

      .six-sec-ease-in-out {
      -webkit-transition: width 6s ease-in-out;
      -moz-transition: width 6s ease-in-out;
      -ms-transition: width 6s ease-in-out;
      -o-transition: width 6s ease-in-out;
      transition: width 6s ease-in-out;
      }

      .container { margin-top: 50px; }

      .progress-bar-vertical {
        width: 50px;
        min-height: 500px;
        display: flex;
        align-items: flex-end;
        margin-right: 20px;
        float: left;
      }

      .progress-bar-vertical .progress-bar {
        width: 100%;
        height: 0;
        -webkit-transition: height 0.6s ease;
        -o-transition: height 0.6s ease;
        transition: height 0.6s ease;
      }

      .label {

        font-size: 23px;
        font-style: italic;

      }
      .row {margin-top: 35px;}

      .nopadding {
      padding: 0;
      margin: 0;
      }

    </style>
  </head>
  <body onload="javascript:Init()" ng-controller="demoController as dm" style="background-color:#262626;color:white;">
  <!-- Tabs -->
  <nav class="navbar navbar-default" style="font-family: Lucida Sans Unicode, Lucida Grande, sans-serif;">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="index.html">VEGA</a>
        <!-- <img src="/content/vega.jpg" /> -->
      </div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="javascript:void(0)" class="tablinks" onclick="openCity(event, 'home')">Home</a></li>
        <li><a href="javascript:void(0)" class="tablinks" onclick="openCity(event, 'battery')">Battery</a></li>
        <li><a href="javascript:void(0)" class="tablinks" onclick="openCity(event, 'data')">Overall</a></li>
        <li><a href="javascript:void(0)" class="tablinks" onclick="openCity(event, 'Debug')">Debug</a></li>
      </ul>
    </div>
  </nav>
  <!-- Tabs_end -->
    <!-- Tab Paris -->
    <div id="battery" class="tabcontent">
       <div style="">
            <nav class="navbar navbar-inverse" style="height: 25">
            <ul class="nav nav-pills" role="tablist" >
            <li role="presentation" class="active"><a href="#">Maximum Temperature <span class="badge">42</span></a></li>
            <li role="presentation" class="active"><a href="#">Minimum Voltage <span class="badge">42</span></a></li>
            </ul>
            </nav>
        </div>
        <div class = "row">
          <div class= "col-md-1">
              <div class="list-group nopadding" style="float:left;width: 100%;font-size:12px;white-space: nowrap;">          
              <a href="#" class="list-group-item active">Battery 1</a>
              <a href="#" class="list-group-item">Battery 2</a>
              <a href="#" class="list-group-item">Battery 3</a>
              <a href="#" class="list-group-item">Battery 4</a>
              <a href="#" class="list-group-item">Battery 5</a>
              <a href="#" class="list-group-item">Battery 6</a>
              <a href="#" class="list-group-item">Battery 7</a>
              <a href="#" class="list-group-item">Battery 8</a>
              <a href="#" class="list-group-item">Battery 9</a>
              <a href="#" class="list-group-item">Battery 10</a>  
              <a href="#" class="list-group-item">Battery 11</a>
              <a href="#" class="list-group-item">Battery 12</a>

        </div>
          </div>
           <div class= "col-md-6 nopadding">
                   <!--   battry Chart -->
              <div id="battryChart nopadding" style="width: 100%;">
              <div  id="container" 
              style="min-width: 310px;height: 400px; ">
              </div>
          </div>
          </div>
          <div class= "col-md-5 nopadding">
              <div id="temp" style="width: 100%;"></div>
          </div>
        </div>
      </div>

      <!-- battryChart_end --> 
      <ng-gauge size="200" type="full" thick="5" value="68.2" cap="round" label="Speed"  foreground-color="#131313" background-color="rgba(255,255,255, 0.4)" append="mph"></ng-gauge>

    </div>
    <div id="home" class="tabcontent">
    <div class="container">
          <div class="row">
            <div class="col-md-3">
              <div>
              <div>
              <highchart id="container-rpm" config="chartConfig" style="width:250px;height:250px;float:left">
              </div>
              <br><br>
              <div>
              <highchart id="container-torque" config="chartConfig" style="width:250px;height:250px;float:left">
              </div>              
              </div>
            </div>
            <div class="col-md-3">
              <div>
              <highchart id="container-speed" config="chartConfig" style="width:250px;height:250px;float:left">
              </div>
            </div>
            <div class="col-md-1">
                 <div class="progress progress-bar-vertical" >
                 <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="height: 50%;float:left">
                 <span class="sr-only">60% Complete</span>
             </div>
           </div>
            </div>

            <div class="col-md-1"> 
                <div class="container">
                    <div class="row">
                      <span class="label label-primary">Maximum Cell Voltage 8.67V</span>   
                    </div>
                    <div class="row">
                      <span class="label label-success">Maximum Cell Voltage 8.67V</span>   
                    </div>
                    <div class="row">
                      <span class="label label-info">Maximum Cell Voltage 8.67V</span>   
                    </div>
                    <div class="row">
                      <span class="label label-warning">Maximum Cell Voltage 8.67V</span>   
                    </div>
                </div>
            </div>
            </div>

    </div>
    </div>

     <!-- Tab Debug-->
   <!-- Tab Debug-->

    <div id="data" class="tabcontent">
         

   </div>

   <div id="Debug" class="tabcontent">
     <div id="sTitle" style="margin: 20px;
                             font-size: 20px;
                             font-family: Lucida Sans Unicode, Lucida Grande, sans-serif;" > Data Received </div>
     <div id="test" style="margin-left: 80px; 
                           border: 2px solid black;
                           border-radius: 10px; 
                           width:1150px;
                           height: 600px;
                           overflow: scroll;
                           font-size: 18px;
                           padding-left: 10px;
                           border-width: 1px;"></div>
   </div>
    <!-- <form action="">
      <input id="m" autocomplete="off" /><button>Send</button>
    </form> -->

    <script>
    var x = [];
    var y = [];
    var socket = io();
      // $('form').submit(function(){
    // socket.emit('chat message', reload());
      //   $('#m').val('');
      //   return false;
      // });
      socket.on('chat message', function(msg){
        var res = msg.split(",");
        x = []
        y = []
        for(var i=35; i<res.length; i++) { 
          res[i] = parseInt(res[i], 10);
          x.push(res[i])
        } 
        for(var i=0; i<21; i++) { 
          res[i] = parseInt(res[i], 10);
          y.push(res[i])
        } 
                $('#test').append($('<li>').text(res[1]));
        // $('#messages').append($('<li>').text(msg));
        // $('#test').append($('<li>').text(msg));
        // $('#test').append($('<li>').text(res));
        // $('#test').append($('<li>').text(int8View));
         // x = res;
      });

 //This is not a highcharts object. It just looks a little like one!
var chartConfig = {

  options: {
      //This is the Main Highcharts chart config. Any Highchart options are valid here.
      //will be overriden by values specified below.
      chart: {
          type: 'bar'
      },
      tooltip: {
          style: {
              padding: 10,
              fontWeight: 'bold'
          }
      }
  },
  //The below properties are watched separately for changes.

  //Series object (optional) - a list of series using normal Highcharts series options.
  series: [{
     data: [10, 15, 12, 8, 7]
  }],
  //Title configuration (optional)
  title: {
     text: 'Hello'
  },
  //Boolean to control showing loading status on chart (optional)
  //Could be a string if you want to show specific loading text.
  loading: false,
  //Configuration for the xAxis (optional). Currently only one x axis can be dynamically controlled.
  //properties currentMin and currentMax provided 2-way binding to the chart's maximum and minimum
  xAxis: {
  currentMin: 0,
  currentMax: 20,
  title: {text: 'values'}
  },
  //Whether to use Highstocks instead of Highcharts (optional). Defaults to false.
  useHighStocks: false,
  //size (optional) if left out the chart will default to size of the div or something sensible.
  size: {
   width: 400,
   height: 300
  },
  //function (optional)
  func: function (chart) {
   //setup some logic for the chart
  }
};
       var chart = Highcharts.chart('container', {
          chart: {
              renderTo: 'container',
              type: 'column'
          },
           title: {
                  text: 'Battery Monitor'
              },
              subtitle: {
                  text: 'Cell voltage levels'
              },
          series: [{
              name: 'Battery Cell Voltages',
              data: x       
          }]
      });

// ////////////////////////////////////////////////////////////////////////////////////////

        var chat_battery = Highcharts.chart('temp', {
              chart: {
                  type: 'line'
              },
              title: {
                  text: 'Cell Temperatures'
              },
              subtitle: {
                  text: 'Source: VEGA'
              },
              yAxis: {
                  title: {
                      text: 'Temperature (°C)'
                  }
              },
              plotOptions: {
                  line: {
                      dataLabels: {
                          enabled: true
                      },
                      enableMouseTracking: true
                  }
              },
              series: [{
                  name: 'Battery cell Temperatures',
                  data: y
              }]
          }); 
// ////////////////////////////////////////////////////////////////////////////////////////
$(function () {

    var gaugeOptions = {

        chart: {
            type: 'solidgauge',
            backgroundColor: '#F6F6F6'

        },

        title: null,

        pane: {
            center: ['50%', '60%'], 
            borderWidth: 0,
            size: '80%',
            startAngle: -90,
            endAngle: 90, 
            background: {
                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#FFF',
                innerRadius: '60%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },

        tooltip: {
            enabled: false
        },
        // the value axis
        yAxis: {
            stops: [
                [0.1, '#55BF3B'], // green
                [0.5, '#DDDF0D'], // yellow
                [0.9, '#DF5353'] // red
            ],
            lineWidth: 0,
            minorTickInterval: null,
            tickAmount: 2,
            title: {
                y: -70
            },
            labels: {
                y: 16
            }
        },

        plotOptions: {
            solidgauge: {
                dataLabels: {
                    y: 5,
                    borderWidth: 0,
                    useHTML: true
                }
            }
        }
    };
    // The RPM gauge
    var chartRpm = Highcharts.chart('container-rpm', Highcharts.merge(gaugeOptions, {
        yAxis: {
            min: 0,
            max: 5,
            title: {
                text: 'RPM'
            }
        },

        series: [{
            name: 'RPM',
            data: [1],
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>' +
                       '<span style="font-size:12px;color:silver">* 1000 / min</span></div>'
            },
            tooltip: {
                valueSuffix: ' revolutions/min'
            }
        }]

    }));

        // Bring life to the dials
    setInterval(function () {
        // Speed
        var point,
            newVal,
            inc;
        // RPM
        if (chartRpm) {
            point = chartRpm.series[0].points[0];
            point.update(4);
        }
    }, 2000);

    // The torque gauge
    var chartTorque = Highcharts.chart('container-torque', Highcharts.merge(gaugeOptions, {
        yAxis: {
            min: 0,
            max: 5,
            title: {
                text: 'Torque'
            }
        },

        series: [{
            name: 'RPM',
            data: [1],
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>' +
                       '<span style="font-size:12px;color:silver">* 1000 / min</span></div>'
            },
            tooltip: {
                valueSuffix: ' revolutions/min'
            }
        }]

    }));


       // Bring life to the dials
    setInterval(function () {
        // Speed
        var point,
            newVal,
            inc;
        // RPM
        if (chartTorque) {
            point = chartTorque.series[0].points[0];
            point.update(4);
        }
    }, 2000);
 // The speed gauge
    var chartspeed = Highcharts.chart('container-speed', Highcharts.merge(gaugeOptions, {
        yAxis: {
            min: 0,
            max: 5,
            title: {
                text: 'Speed'
            }
        },

        series: [{
            name: 'Speed',
            data: [1],
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>' +
                       '<span style="font-size:12px;color:silver">* 1000 / min</span></div>'
            },
            tooltip: {
                valueSuffix: ' revolutions/min'
            }
        }]

    }));


       // Bring life to the dials
    setInterval(function () {
        // Speed
        var point,
            newVal,
            inc;
        // RPM
        if (chartspeed) {
            point = chartspeed.series[0].points[0];
            point.update(4);
        }
    }, 2000);


});


function reload(){
  chart.series[0].setData(x);
  chat_battery.series[0].setData(y);

}
setInterval(reload, 1000)


function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
}

function Init(){
   openCity(event, 'home');
  
}
     
    </script>
<style>                        
</style>
</body>
</html>
